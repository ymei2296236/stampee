{% extends "base.html" %}

{% block title %}Votre Compte{% endblock %}

{% block body %}
<main data-page="catalogue">

    <aside class="filtres">
        <div class="filtres__titre-container">
            <div class="filtres__titre-titre">
                <i class="fa-solid fa-sliders"></i>
                <h3>Filtres</h3>
            </div>
            <i class="fa-solid fa-chevron-left"></i>
        </div>
        <form class="filtres__form" action="select" method="post">
            <div class="filtres__btns">
                <button type="submit" class="btn btn--principal" aria-label="Appliquer les filtres">
                    Appliquer les filtres 
                </button>
                <a href="{{url_racine}}enchere/index" class="btn btn--icon-text" > <i class="fa-solid fa-trash"></i>Effacer tous les filtres</a>
            </div>
            <fieldset>
                <legend>Condition</legend>
                {% for etat in etats %}
                <input type="checkbox" id="etat{{etat.id}}" name="etat[]" value="{{ etat.nom }}" {% if etat.nom in filtres.etat %} checked {% endif %}>
                <label for="etat{{etat.id}}">{{ etat.nom }}</label>
                {% endfor %}
            </fieldset>

            <fieldset>
                <label for="pays" class="labelBold">Pays</label>
                <select name="pays" id="pays">
                    <option value="">Faire un choix</option>
                    {% for pays in paysTous %}
                    <option value="{{ pays.nom }}" {% if pays.nom in filtres.pays %} selected {% endif %}>{{ pays.nom }}</option>
                    {% endfor %}
                </select>
            </fieldset>

            <fieldset>
                <legend>Prix</legend>
                <input type="checkbox" id="prix1" name="prix[]" value=">=0.01 and <=0.99" {% if ">=0.01 and <=0.99" in filtres.prix %} checked {% endif %}>
                <label for="prix1">1 ¢ - 99 ¢</label>
                <input type="checkbox" id="prix2" name="prix[]" value=">=1 and <=9.99"  {% if ">=1 and <=9.99" in filtres.prix %} checked {% endif %}>
                <label for="prix2">1,00 $  - 9,99 $</label>
                <input type="checkbox" id="prix3" name="prix[]" value=">=10 and <=24.99"  {% if ">=10 and <=24.99" in filtres.prix %} checked {% endif %}>
                <label for="prix3">10,00 $  - 24,99 $</label>
                <input type="checkbox" id="prix4" name="prix[]" value=">=25 and <=49.99"  {% if ">=25 and <=49.99" in filtres.prix %} checked {% endif %}>
                <label for="prix4">25,00 $ - 49,99 $</label>
                <input type="checkbox" id="prix5" name="prix[]" value=">=50" {% if ">=50" in filtres.prix %} checked {% endif %}>
                <label for="prix5">50 $ et plus</label>
            </fieldset>

            <fieldset>
                <legend>Dimension</legend>
                {% for dimension in dimensions %}
                <input type="checkbox" id="dimension{{loop.index}}" name="dimension[]" value="{{ dimension.nom }}" {% if dimension.nom in filtres.dimension %} checked {% endif %}>
                <label for="dimension{{loop.index}}">{{ dimension.nom }}</label>
                {% endfor %}

            </fieldset>


        </form>
    </aside>

    <div class="liste">
        <div class="tri">
            <p class="note">{{resultats}}</p>
            <form action="catalogue.html">
                <fieldset class="tri__fieldset">
                    <label class="labelBold" for="tri">Trier par</label>
                    <select name="tri" id="tri" >
                        <option value="1">Enchères en cours</option>
                        <option value="2">Prix le plus bas</option>
                        <option value="3">Prix le plus élévé</option>
                        <option value="4">Nouveautés</option>
                        <option value="5">Enchères archivées</option>
                    </select>
                </fieldset>
            </form>
        </div>
        <div class="liste__contenu">   
            {% for enchere in encheres %}
            <div class="item">
                <a href="{{url_racine}}enchere/show/{{enchere.id}}" class="item__lien">
                    <div class="item__coups-de-coeur"></div>
                    <div class="item__contenu">
                        <div class="item__img"><img src="{{url_racine}}assets/img/jpg/{{ enchere.image }}" alt="Image du timbre"></div>
                        <p class="item__description">{{enchere.timbre_nom}} {{enchere.timbre_nom_2}}</p>
                        <div class="prix">
                            <p class="prix__description">Mise courante</p>
                            <p class="prix__montant">{{enchere.mise_courante}}<small class="prix_decimal"> $</small></p>
                        </div>
                        <span class="btn btn--principal item__btn">Miser</span>
                    </div>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</main>

{% endblock %}